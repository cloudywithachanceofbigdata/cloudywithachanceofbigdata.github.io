<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-tags-post-list-page plugin-blog plugin-id-default">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">One post tagged with &quot;roles&quot; | Full Stack Chronicles</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://fullstackchronicles.io/img/fullstackchronicles-cover-image.png"><meta data-rh="true" name="twitter:image" content="https://fullstackchronicles.io/img/fullstackchronicles-cover-image.png"><meta data-rh="true" property="og:url" content="https://fullstackchronicles.io/tags/roles"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="robots" content="index,follow"><meta data-rh="true" name="twitter:site" content="@fschronicles1"><meta data-rh="true" name="twitter:creator" content="@fschronicles1"><meta data-rh="true" name="og:type" content="website"><meta data-rh="true" name="og:locale" content="en_US"><meta data-rh="true" name="og:site_name" content="Full Stack Chronicles"><meta data-rh="true" name="msapplication-TileColor" content="#2d89ef"><meta data-rh="true" name="theme-color" content="#ffffff"><meta data-rh="true" property="og:title" content="One post tagged with &quot;roles&quot; | Full Stack Chronicles"><meta data-rh="true" name="docusaurus_tag" content="blog_tags_posts"><meta data-rh="true" name="docsearch:docusaurus_tag" content="blog_tags_posts"><link data-rh="true" rel="icon" href="/favicon.ico"><link data-rh="true" rel="canonical" href="https://fullstackchronicles.io/tags/roles"><link data-rh="true" rel="alternate" href="https://fullstackchronicles.io/tags/roles" hreflang="en"><link data-rh="true" rel="alternate" href="https://fullstackchronicles.io/tags/roles" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://&lt;your algolia app id&gt;-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/rss.xml" title="Full Stack Chronicles Blog Feed RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/atom.xml" title="Full Stack Chronicles Blog Feed Atom Feed">
<link rel="alternate" type="application/json" href="/feed.json" title="Full Stack Chronicles Blog Feed JSON Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-0FVDC1E8G6"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-0FVDC1E8G6",{})</script>


<link rel="search" type="application/opensearchdescription+xml" title="Full Stack Chronicles" href="/opensearch.xml">



<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#0f4c81"><link rel="stylesheet" href="/assets/css/styles.b0c95f89.css">
<link rel="preload" href="/assets/js/runtime~main.e849b1f5.js" as="script">
<link rel="preload" href="/assets/js/main.ef636b07.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" style="background-color:#A9BCD0;color:#1A4E82" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="content_knG7 announcementBarContent_xLdY"><b>If you find our content useful, follow us on <a target="_blank" rel="noopener noreferrer" href="https://github.com/stackql">GitHub</a>, if you have some content to share, reach out</b></div><button type="button" aria-label="Close" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav aria-label="Main" class="navbar navbar--fixed-top navbarHideable_m1mJ navbar--primary"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/full-stack-logo-transparent.svg" alt="Full Stack Chronicles" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/full-stack-logo-transparent.svg" alt="Full Stack Chronicles" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Full Stack Chronicles</b></a></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/">Home</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current="page" class="navbar__link active" aria-haspopup="true" aria-expanded="false" role="button" href="/tags">Topics</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/tags">All Topics</a></li><li><a class="dropdown__link" href="/tags/gcp">Google Cloud Platform</a></li><li><a class="dropdown__link" href="/tags/aws">AWS</a></li><li><a class="dropdown__link" href="/tags/azure">Azure</a></li><li><a class="dropdown__link" href="/tags/snowflake">Snowflake</a></li><li><a class="dropdown__link" href="/tags/okta">Okta</a></li><li><a class="dropdown__link" href="/tags/openapi">OpenAPI</a></li><li><a class="dropdown__link" href="/tags/spark">Spark</a></li><li><a class="dropdown__link" href="/tags/kafka">Kafka</a></li><li><a class="dropdown__link" href="/tags/ci-cd">CI/CD</a></li></ul></div><a class="navbar__item navbar__link" href="/archive">Archive</a><a href="https://github.com/stackql/fullstackchronicles.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">Recent Posts</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/databricks-in-five-minutes">Databricks in 5 Minutes</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/netlify-logging-to-sumologic-without-log-drains">Netlify logging to SumoLogic Without Log Drains</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/enhancing-dbt-snapshots-with-operational-metadata">Enhancing dbt Snapshots with Operational Metadata</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/json-ld-structured-data-for-docusaurus">Yoast (like) JSON-LD Structured Data for Docusaurus</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/gitver-an-alternative-versioning-scheme-to-semver-or-calver">Introducing GitVer - an alternative versioning scheme</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/use-deno-deploy-to-serve-non-traditional-artifacts">Use Deno Deploy to Serve Non-Traditional Artifacts</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/apache-beam-in-five-minutes">Apache Beam in Five Minutes</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/aws-iam-vs-google-iam">AWS IAM vs Google IAM</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/create-and-use-custom-magic-commands-in-jupyter">Create and use Custom Magic Commands in Jupyter</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/deno-in-five-minutes">Deno in 5 Minutes</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/dbt-in-five-minutes">DBT in 5 Minutes</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/loading-parquet-files-into-snowflake">Loading Parquet Files into Snowflake</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/analyze-developer-activity-with-stackql-jupyter-bigquery">Analyze Developer Activity with StackQL, Jupyter and BigQuery</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/converting-google-discovery-docs-to-openapi3-specs">Converting Google Discovery Docs to OpenAPI3 Specs</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/recurse-javascript-object-to-get-values-for-a-given-key-the-easy-way">Recurse JavaScript Object to Get Values for a Given Key the Easy Way</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><header class="margin-bottom--xl"><h1>One post tagged with &quot;roles&quot;</h1><a href="/tags">View All Tags</a></header><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><meta itemprop="image" content="https://fullstackchronicles.io/images/snowflake.png"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/enumerating-all-roles-for-a-user-in-snowflake">Enumerating all roles for a user in Snowflake</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2021-03-23T00:00:00.000Z" itemprop="datePublished">March 23, 2021</time> · <!-- -->2 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://www.linkedin.com/in/jeffreyaven/" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://s.gravatar.com/avatar/f96573d092470c74be233e1dded5376f?s=80" alt="Jeffrey Aven"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://www.linkedin.com/in/jeffreyaven/" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Jeffrey Aven</span></a></div><small class="avatar__subtitle" itemprop="description">Technologist and Cloud Consultant</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p><img loading="lazy" alt="Snowflake" src="data:image/png;base64,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" width="82" height="75" class="img_ev3q"></p><p>Snowflake allows roles to be assigned to other roles, so when a user is assigned to a role, they may inherit the ability to use countless other roles.</p><p><strong>Challenge:</strong> recursively enumerate all roles for a given user</p><p>One solution would be to create a complex query on the <code>“SNOWFLAKE&quot;.&quot;ACCOUNT_USAGE&quot;.&quot;GRANTS_TO_ROLES&quot;</code> object.</p><p>An easier solution is to use a stored procedure to recurse through grants for a given user and return an <code>ARRAY</code> of roles for that user.</p><p>This is a good programming exercise in tail call recursion (sort of) in JavaScript. Here is the code:</p><iframe width="100%" frameborder="0" id="gist-9b9985dbf8163ade22b71f2ccf20cb51"></iframe><p>To call the stored proc, execute:</p><iframe width="100%" frameborder="0" id="gist-fbbfaa3b67af828e4d905411567cd031"></iframe><p>One drawback of stored procedures in Snowflake is that they can only have scalar or array return types and cannot be used directly in a SQL query, however you can use the <code>table(result_scan(last_query_id()))</code> trick to get around this, as shown below where we will pivot the <code>ARRAY</code> into a record set with the array elements as rows:</p><iframe width="100%" frameborder="0" id="gist-6a7e8bc552b87ab1e039f22bacf1b65f"></iframe><p><strong>IMPORTANT</strong></p><p>This query <strong>must</strong> be the next statement run immediately after the <code>CALL</code> statement and cannot be run again until you run another <code>CALL</code> statement.</p><p>More adventures with Snowflake soon!</p><blockquote><p>if you have enjoyed this post, please consider <a href="https://www.buymeacoffee.com/jeffreyaven" target="_blank" rel="noopener noreferrer"><strong>buying me a coffee ☕</strong></a> to help me keep writing!</p></blockquote></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/javascript">javascript</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/rbac">rbac</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/roles">roles</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/snowflake">snowflake</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/sql">sql</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/stored-procedure">stored-procedure</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/tail-call-recursion">tail-call-recursion</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/tailcall">tailcall</a></li></ul></div></footer></article><nav class="pagination-nav" aria-label="Blog list page navigation"></nav></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Blog</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/">Home</a></li><li class="footer__item"><a class="footer__link-item" href="/archive">Archive</a></li><li class="footer__item"><a class="footer__link-item" href="/tags">Tags</a></li></ul></div><div class="col footer__col"><div class="footer__title">Sponsors</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackql.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item">StackQL<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://gammadata.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Gamma Data<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.windrate.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">WindRate<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/stackql/fullstackchronicles.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div></div></footer></div>
<script src="/assets/js/runtime~main.e849b1f5.js"></script>
<script src="/assets/js/main.ef636b07.js"></script>
</body>
</html>