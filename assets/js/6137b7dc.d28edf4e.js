"use strict";(self.webpackChunkfull_stack_chronicles=self.webpackChunkfull_stack_chronicles||[]).push([[53393],{3905:function(e,t,a){a.d(t,{Zo:function(){return c},kt:function(){return h}});var n=a(67294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var l=n.createContext({}),u=function(e){var t=n.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},c=function(e){var t=u(e.components);return n.createElement(l.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,o=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),d=u(a),h=r,y=d["".concat(l,".").concat(h)]||d[h]||p[h]||o;return a?n.createElement(y,i(i({ref:t},c),{},{components:a})):n.createElement(y,i({ref:t},c))}));function h(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=a.length,i=new Array(o);i[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:r,i[1]=s;for(var u=2;u<o;u++)i[u]=a[u];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}d.displayName="MDXCreateElement"},70211:function(e,t,a){a.r(t),a.d(t,{assets:function(){return p},contentTitle:function(){return u},default:function(){return y},frontMatter:function(){return l},metadata:function(){return c},toc:function(){return d}});var n=a(83117),r=a(80102),o=(a(67294),a(3905)),i=a(59943),s=["components"],l={slug:"analyze-developer-activity-with-stackql-jupyter-bigquery",title:"Analyze Developer Activity with StackQL, Jupyter and BigQuery",authors:["yunchengyang"],draft:!1,image:"/img/blog/analyze-developer-activity-with-stackql-jupyter-bigquery.png",tags:["stackql","github","sql","jupyter","bigquery"],keywords:["stackql","github","sql","jupyter","bigquery"],description:"This article demonstrates how to use StackQL, Jupyter and BigQuery to analyze developer data from GitHub."},u=void 0,c={permalink:"/analyze-developer-activity-with-stackql-jupyter-bigquery",editUrl:"https://github.com/stackql/fullstackchronicles.io/tree/main/src/blog/blog/2022-07-24-analyze-developer-activity-with-stackql-jupyter-bigquery/index.md",source:"@site/blog/2022-07-24-analyze-developer-activity-with-stackql-jupyter-bigquery/index.md",title:"Analyze Developer Activity with StackQL, Jupyter and BigQuery",description:"This article demonstrates how to use StackQL, Jupyter and BigQuery to analyze developer data from GitHub.",date:"2022-07-24T00:00:00.000Z",formattedDate:"July 24, 2022",tags:[{label:"stackql",permalink:"/tags/stackql"},{label:"github",permalink:"/tags/github"},{label:"sql",permalink:"/tags/sql"},{label:"jupyter",permalink:"/tags/jupyter"},{label:"bigquery",permalink:"/tags/bigquery"}],readingTime:2.475,truncated:!1,authors:[{name:"Yuncheng Yang",title:"Full Stack Engineer",url:"https://www.linkedin.com/in/yuncheng-fabio-yang/",imageURL:"https://en.gravatar.com/userimage/195643035/72fc562ee87d0c67847c8989d2808129.jpg?size=80",key:"yunchengyang"}],frontMatter:{slug:"analyze-developer-activity-with-stackql-jupyter-bigquery",title:"Analyze Developer Activity with StackQL, Jupyter and BigQuery",authors:["yunchengyang"],draft:!1,image:"/img/blog/analyze-developer-activity-with-stackql-jupyter-bigquery.png",tags:["stackql","github","sql","jupyter","bigquery"],keywords:["stackql","github","sql","jupyter","bigquery"],description:"This article demonstrates how to use StackQL, Jupyter and BigQuery to analyze developer data from GitHub."},nextItem:{title:"Converting Google Discovery Docs to OpenAPI3 Specs",permalink:"/converting-google-discovery-docs-to-openapi3-specs"}},p={authorsImageUrls:[void 0]},d=[{value:"Step by Step Guide",id:"step-by-step-guide",level:2},{value:"1. Create GitHub Personal Access Token",id:"1-create-github-personal-access-token",level:3},{value:"2. Setup your Jupyter Notebook",id:"2-setup-your-jupyter-notebook",level:3},{value:"3. Setup StackQL Authentication to GitHub",id:"3-setup-stackql-authentication-to-github",level:3},{value:"4. Retrieve data",id:"4-retrieve-data",level:3},{value:"Get Contributors, Commits, Pull Requests and Reviews",id:"get-contributors-commits-pull-requests-and-reviews",level:4},{value:"Aggregate Data By Username",id:"aggregate-data-by-username",level:4},{value:"5. Store the Data in BigQuery",id:"5-store-the-data-in-bigquery",level:3}],h={toc:d};function y(e){var t=e.components,l=(0,r.Z)(e,s);return(0,o.kt)("wrapper",(0,n.Z)({},h,l,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"It is common to have a remote and dispersed team these days. As face to face meetings are less common and with geographically dispersed development teams not possible, it is challenging to have a clear picture of where your team is.  "),(0,o.kt)("p",null,"GitHub provides useful data to help us understand your development team's workload and progress.  StackQL has an official GitHub provider which allows you to access this data using SQL. "),(0,o.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"StackQL is an open source project which enables you to query, analyze and interact with cloud and SaaS provider resources using SQL, see ",(0,o.kt)("a",{parentName:"p",href:"https://stackql.io/"},(0,o.kt)("strong",{parentName:"a"},"stackql.io"))," "))),(0,o.kt)("p",null,"In this example we will use the ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/stackql/pystackql"},(0,o.kt)("inlineCode",{parentName:"a"},"pystackql"))," Python package (Python wrapper for StackQL) along with a Jupyter Notebook to retrieve data from GitHub using SQL, then sink the data into a cloud native data warehouse for long term storage and analytics at scale, in this example we have used ",(0,o.kt)("a",{parentName:"p",href:"https://cloud.google.com/bigquery"},"BigQuery"),".  "),(0,o.kt)("h2",{id:"step-by-step-guide"},"Step by Step Guide"),(0,o.kt)("p",null,"This guide will walk you through the steps involved in capturing and analyzing developer data using StackQL, Python, Jupyter and BigQuery.  "),(0,o.kt)("h3",{id:"1-create-github-personal-access-token"},"1. Create GitHub Personal Access Token"),(0,o.kt)("p",null,"You will need to create a Personal Access Token in GitHub for a user which has access to the org or orgs in GitHub you will be analyzing.  Follow ",(0,o.kt)("a",{parentName:"p",href:"https://docs.github.com/en/enterprise-server@3.4/authentication/keeping-your-account-and-data-secure/creating-a-personal-access-token"},"this guide")," to create your GitHub token and store it somewhere safe.  "),(0,o.kt)("h3",{id:"2-setup-your-jupyter-notebook"},"2. Setup your Jupyter Notebook"),(0,o.kt)("p",null,"You need to set up your Jupyter environment, you can either use the Docker, see ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/stackql/stackql-jupyter-demo"},"stackql/stackql-jupyter-demo")," or:  "),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("a",{parentName:"li",href:"https://jupyter.org/try"},"Create your Jupyter project")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("a",{parentName:"li",href:"https://stackql.io/downloads"},"Download and install StackQL")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("a",{parentName:"li",href:"https://github.com/stackql/pystackql"},"Clone the pystackql repo"))),(0,o.kt)("h3",{id:"3-setup-stackql-authentication-to-github"},"3. Setup StackQL Authentication to GitHub"),(0,o.kt)("p",null,"You can find instructions on how to use your personal access token to authenticate to GitHub ",(0,o.kt)("a",{parentName:"p",href:"https://registry.stackql.io/providers/github/#authentication"},"here"),".  The following example shows how to do this in a Jupyter notebook cell using ",(0,o.kt)("inlineCode",{parentName:"p"},"pystackql"),"."),(0,o.kt)(i.Z,{id:"18e9de9c1a184a5d3e7d623d4681ceb3",mdxType:"Gist"}),(0,o.kt)("h3",{id:"4-retrieve-data"},"4. Retrieve data"),(0,o.kt)("p",null,"Next, we will use StackQL SQL queries to get commits, pull requests and pull request reviews, then we will aggregate by usernames of contributors. You can use ",(0,o.kt)("inlineCode",{parentName:"p"},"JOIN")," semantics in StackQL to do this as well.  "),(0,o.kt)("h4",{id:"get-contributors-commits-pull-requests-and-reviews"},"Get Contributors, Commits, Pull Requests and Reviews"),(0,o.kt)("p",null,"In the following cell we will query data from GitHub using StackQL:  "),(0,o.kt)(i.Z,{id:"29da46f9428ea7c2dcb53fdded019785",mdxType:"Gist"}),(0,o.kt)("h4",{id:"aggregate-data-by-username"},"Aggregate Data By Username"),(0,o.kt)("p",null,"Now we will aggregate the data by each contributor, see the following example:"),(0,o.kt)(i.Z,{id:"4414fcf6bdd6aff4d227c07b461887e6",mdxType:"Gist"}),(0,o.kt)("h3",{id:"5-store-the-data-in-bigquery"},"5. Store the Data in BigQuery"),(0,o.kt)("p",null,"After the transformation of data, we will then upload it to BigQuery.  First, we will store the data as a new line delimited ",(0,o.kt)("inlineCode",{parentName:"p"},"json")," file, making the uploading process much easier and handling the nested schema better, as shown in the following cell:  "),(0,o.kt)(i.Z,{id:"34ac71d46030693bbaa3c7c4309855f5",mdxType:"Gist"}),(0,o.kt)("p",null,"Now we can see the table on BigQuery as shown here:  "),(0,o.kt)("p",null,(0,o.kt)("a",{target:"_blank",href:a(24865).Z},(0,o.kt)("img",{alt:"BigQuery User Activity Table",src:a(50833).Z,width:"1612",height:"1202"}))),(0,o.kt)("p",null,"From here you can use the same process to append data to the table and use BigQuery to perform analytics at scale on the data."),(0,o.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"The complete notebook for this article can be accessed at ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/FabioYyc/stackql-github-notebook-bq"},"FabioYyc/stackql-github-notebook-bq")," "))))}y.isMDXComponent=!0},24865:function(e,t,a){t.Z=a.p+"assets/files/bq-user-activity-e0f591dad575e7c819b89c1e0024fdf7.png"},59943:function(e,t,a){var n=a(67294);a(45697);function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var i=function(e){function t(){return r(this,t),o(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){this._updateIframeContent()},t.prototype.componentDidUpdate=function(e,t){this._updateIframeContent()},t.prototype._defineUrl=function(){var e=this.props,t=e.id,a=e.file;return"https://gist.github.com/"+t+".js"+(a?"?file="+a:"")},t.prototype._updateIframeContent=function(){var e=this.props,t=e.id,a=e.file,n=this.iframeNode,r=n.document;n.contentDocument?r=n.contentDocument:n.contentWindow&&(r=n.contentWindow.document);var o='<html><head><base target="_parent"><style>*{font-size:12px;}</style></head><body '+("onload=\"parent.document.getElementById('"+(a?"gist-"+t+"-"+a:"gist-"+t)+"').style.height=document.body.scrollHeight + 'px'\"")+">"+('<script type="text/javascript" src="'+this._defineUrl()+'"><\/script>')+"</body></html>";r.open(),r.writeln(o),r.close()},t.prototype.render=function(){var e=this,t=this.props,a=t.id,r=t.file;return n.createElement("iframe",{ref:function(t){e.iframeNode=t},width:"100%",frameBorder:0,id:r?"gist-"+a+"-"+r:"gist-"+a})},t}(n.PureComponent);t.Z=i},50833:function(e,t,a){t.Z=a.p+"assets/images/bq-user-activity-e0f591dad575e7c819b89c1e0024fdf7.png"}}]);