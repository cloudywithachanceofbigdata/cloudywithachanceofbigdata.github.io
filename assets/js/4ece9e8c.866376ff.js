"use strict";(self.webpackChunkcloudy_with_a_chance_of_big_data=self.webpackChunkcloudy_with_a_chance_of_big_data||[]).push([[8024],{3905:function(e,t,a){a.d(t,{Zo:function(){return c},kt:function(){return f}});var i=a(67294);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,i,n=function(e,t){if(null==e)return{};var a,i,n={},r=Object.keys(e);for(i=0;i<r.length;i++)a=r[i],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)a=r[i],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var u=i.createContext({}),s=function(e){var t=i.useContext(u),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},c=function(e){var t=s(e.components);return i.createElement(u.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},d=i.forwardRef((function(e,t){var a=e.components,n=e.mdxType,r=e.originalType,u=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),d=s(a),f=n,h=d["".concat(u,".").concat(f)]||d[f]||p[f]||r;return a?i.createElement(h,o(o({ref:t},c),{},{components:a})):i.createElement(h,o({ref:t},c))}));function f(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var r=a.length,o=new Array(r);o[0]=d;var l={};for(var u in t)hasOwnProperty.call(t,u)&&(l[u]=t[u]);l.originalType=e,l.mdxType="string"==typeof e?e:n,o[1]=l;for(var s=2;s<r;s++)o[s]=a[s];return i.createElement.apply(null,o)}return i.createElement.apply(null,a)}d.displayName="MDXCreateElement"},15939:function(e,t,a){a.r(t),a.d(t,{frontMatter:function(){return u},contentTitle:function(){return s},metadata:function(){return c},assets:function(){return p},toc:function(){return d},default:function(){return h}});var i=a(87462),n=a(63366),r=(a(67294),a(3905)),o=a(59943),l=["components"],u={slug:"azure-static-web-app-review",title:"Azure Static Web App Review",authors:["jeffreyaven"],draft:!1,hide_table_of_contents:!0,image:"images/AzureStaticWebApp.png",tags:["azure","jamstack","microsoft-azure","netlify","progressive-web-application","pwa","react","single-page-application","spa","vercel","vue-js"],keywords:["azure","jamstack","microsoft-azure","netlify","progressive-web-application","pwa","react","single-page-application","spa","vercel","vue-js"]},s=void 0,c={permalink:"/cloudywithachanceofbigdata.github.io/azure-static-web-app-review",editUrl:"https://github.com/cloudywithachanceofbigdata/cloudywithachanceofbigdata.github.io/tree/main/src/blog/blog/2021-06-18-azure-static-web-app-review/index.md",source:"@site/blog/2021-06-18-azure-static-web-app-review/index.md",title:"Azure Static Web App Review",description:"The Azure Static Web App feature is relatively new in the Azure estate which has recently become generally available, I thought I would take it for a test drive and discuss my findings.",date:"2021-06-18T00:00:00.000Z",formattedDate:"June 18, 2021",tags:[{label:"azure",permalink:"/cloudywithachanceofbigdata.github.io/tags/azure"},{label:"jamstack",permalink:"/cloudywithachanceofbigdata.github.io/tags/jamstack"},{label:"microsoft-azure",permalink:"/cloudywithachanceofbigdata.github.io/tags/microsoft-azure"},{label:"netlify",permalink:"/cloudywithachanceofbigdata.github.io/tags/netlify"},{label:"progressive-web-application",permalink:"/cloudywithachanceofbigdata.github.io/tags/progressive-web-application"},{label:"pwa",permalink:"/cloudywithachanceofbigdata.github.io/tags/pwa"},{label:"react",permalink:"/cloudywithachanceofbigdata.github.io/tags/react"},{label:"single-page-application",permalink:"/cloudywithachanceofbigdata.github.io/tags/single-page-application"},{label:"spa",permalink:"/cloudywithachanceofbigdata.github.io/tags/spa"},{label:"vercel",permalink:"/cloudywithachanceofbigdata.github.io/tags/vercel"},{label:"vue-js",permalink:"/cloudywithachanceofbigdata.github.io/tags/vue-js"}],readingTime:2.59,truncated:!1,authors:[{name:"Jeffrey Aven",title:"Technologist and Cloud Consultant",url:"https://www.linkedin.com/in/jeffreyaven/",imageURL:"https://s.gravatar.com/avatar/f96573d092470c74be233e1dded5376f?s=80",key:"jeffreyaven"}],prevItem:{title:"Use BigQuery to trigger Cloud Run",permalink:"/cloudywithachanceofbigdata.github.io/use-bigquery-to-trigger-cloud-run"},nextItem:{title:"Introducing the Metadata Hub (MDH)",permalink:"/cloudywithachanceofbigdata.github.io/introducing-the-metadata-hub-mdh"}},p={authorsImageUrls:[void 0]},d=[{value:"Deploying Static Web Apps in Azure",id:"deploying-static-web-apps-in-azure",children:[]},{value:"GitHub Actions",id:"github-actions",children:[]},{value:"Preview or Staging Releases",id:"preview-or-staging-releases",children:[]},{value:"Routes and Authorization",id:"routes-and-authorization",children:[]},{value:"Pros",id:"pros",children:[]},{value:"Cons",id:"cons",children:[]}],f={toc:d};function h(e){var t=e.components,a=(0,n.Z)(e,l);return(0,r.kt)("wrapper",(0,i.Z)({},f,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"The Azure Static Web App feature is relatively new in the Azure estate which has recently become generally available, I thought I would take it for a test drive and discuss my findings."),(0,r.kt)("p",null,"I am a proponent of the JAMStack architecture for front end applications and a user of CD enabled CDN services like Netlify, so this Azure feature was naturally appealing to me."),(0,r.kt)("p",null,"Azure SWAs allow you to serve static assets (like JavaScript) without a origin server, meaning you don\u2019t need a web server, are able to streamline content distribution and web app performance, and reduce the attack surface area of your application."),(0,r.kt)("p",null,"The major advantage to using is simplicity, no scaffolding or infra requirements and it is seamlessly integrated into your CI/CD processes (natively if you are using GitHub)."),(0,r.kt)("h2",{id:"deploying-static-web-apps-in-azure"},"Deploying Static Web Apps in Azure"),(0,r.kt)("p",null,"Pretty simple to setup, aside from a name and a resource group, you just need to supply:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"a ",(0,r.kt)("strong",{parentName:"li"},"location")," (Azure region to be used for serverless back end APIs via Azure Function Apps) note that this is not a location where the static web is necessarily running"),(0,r.kt)("li",{parentName:"ul"},"a GitHub or GitLab ",(0,r.kt)("strong",{parentName:"li"},"repo URL")),(0,r.kt)("li",{parentName:"ul"},"the ",(0,r.kt)("strong",{parentName:"li"},"branch")," you wish to use to trigger production deployments (e.g. ",(0,r.kt)("inlineCode",{parentName:"li"},"main"),")"),(0,r.kt)("li",{parentName:"ul"},"a ",(0,r.kt)("strong",{parentName:"li"},"path")," to your code within your app (e.g. where your ",(0,r.kt)("inlineCode",{parentName:"li"},"package.json")," file is located)"),(0,r.kt)("li",{parentName:"ul"},"an ",(0,r.kt)("strong",{parentName:"li"},"output folder")," (e.g. ",(0,r.kt)("inlineCode",{parentName:"li"},"dist"),") this should not exist in your repo"),(0,r.kt)("li",{parentName:"ul"},"a project or personal access ",(0,r.kt)("strong",{parentName:"li"},"token")," for your GitHub account (alternatively you can perform an interactive OAuth2.0 consent if using the portal)")),(0,r.kt)("p",null,"An example is shown here:"),(0,r.kt)(o.Z,{id:"eef5a25ed01327a180711fd64370c457",mdxType:"Gist"}),(0,r.kt)("h2",{id:"github-actions"},"GitHub Actions"),(0,r.kt)("p",null,"Using the consent provided (either using the OAuth flow or by providing a token), Azure Static Web Apps will automagically create the GitHub Actions workflow to deploy your application on a push or merge event to your repo. This includes providing scoped API credentials to Azure to allow access to the Static Web App resource using secrets in GitHub (which are created automagically as well). An example workflow is shown here:"),(0,r.kt)(o.Z,{id:"8e7ad2bdd9ba351368c5aedad289e972",mdxType:"Gist"}),(0,r.kt)("h2",{id:"preview-or-staging-releases"},"Preview or Staging Releases"),(0,r.kt)("p",null,"Similar to the functionality in analogous services like Netlify, you can configure preview releases of your application to be deployed from specified branches on pull request events."),(0,r.kt)("h2",{id:"routes-and-authorization"},"Routes and Authorization"),(0,r.kt)("p",null,"Routes (for SPAs) need to be provided to Azure by using a file named ",(0,r.kt)("inlineCode",{parentName:"p"},"staticwebapp.config.json")," located in the application root of your repo (same level as you ",(0,r.kt)("inlineCode",{parentName:"p"},"package.json")," file). You can also specify response codes and whether the rout requires authentication as shown here:"),(0,r.kt)(o.Z,{id:"7dd3bcf05474da551b3d311ae0729e18",mdxType:"Gist"}),(0,r.kt)("h2",{id:"pros"},"Pros"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Globally distributed CDN"),(0,r.kt)("li",{parentName:"ul"},"Increased security posture, reduced attack surface area"),(0,r.kt)("li",{parentName:"ul"},"Simplified architecture and deployment"),(0,r.kt)("li",{parentName:"ul"},"No App Service Plan required \u2013 cost reduction"),(0,r.kt)("li",{parentName:"ul"},"Enables Continuous Deployment \u2013 incl preview/staging environments"),(0,r.kt)("li",{parentName:"ul"},"TLS and DNS can be easily configured for your app")),(0,r.kt)("h2",{id:"cons"},"Cons"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Serverless API locations are limited"),(0,r.kt)("li",{parentName:"ul"},"Integration with other VCS/CI/CD systems like GitLab would need to be custom built (GitHub and Azure DevOps is integrated)")),(0,r.kt)("p",null,"Overall, this is a good feature for deploying SPAs or PWAs in Azure."))}h.isMDXComponent=!0},59943:function(e,t,a){var i=a(67294);a(45697);function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var o=function(e){function t(){return n(this,t),r(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){this._updateIframeContent()},t.prototype.componentDidUpdate=function(e,t){this._updateIframeContent()},t.prototype._defineUrl=function(){var e=this.props,t=e.id,a=e.file;return"https://gist.github.com/"+t+".js"+(a?"?file="+a:"")},t.prototype._updateIframeContent=function(){var e=this.props,t=e.id,a=e.file,i=this.iframeNode,n=i.document;i.contentDocument?n=i.contentDocument:i.contentWindow&&(n=i.contentWindow.document);var r='<html><head><base target="_parent"><style>*{font-size:12px;}</style></head><body '+("onload=\"parent.document.getElementById('"+(a?"gist-"+t+"-"+a:"gist-"+t)+"').style.height=document.body.scrollHeight + 'px'\"")+">"+('<script type="text/javascript" src="'+this._defineUrl()+'"><\/script>')+"</body></html>";n.open(),n.writeln(r),n.close()},t.prototype.render=function(){var e=this,t=this.props,a=t.id,n=t.file;return i.createElement("iframe",{ref:function(t){e.iframeNode=t},width:"100%",frameBorder:0,id:n?"gist-"+a+"-"+n:"gist-"+a})},t}(i.PureComponent);t.Z=o}}]);