"use strict";(self.webpackChunkcloudy_with_a_chance_of_big_data=self.webpackChunkcloudy_with_a_chance_of_big_data||[]).push([[1235],{3905:function(e,t,a){a.d(t,{Zo:function(){return m},kt:function(){return g}});var n=a(67294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var c=n.createContext({}),u=function(e){var t=n.useContext(c),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},m=function(e){var t=u(e.components);return n.createElement(c.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},s=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,l=e.originalType,c=e.parentName,m=o(e,["components","mdxType","originalType","parentName"]),s=u(a),g=r,p=s["".concat(c,".").concat(g)]||s[g]||d[g]||l;return a?n.createElement(p,i(i({ref:t},m),{},{components:a})):n.createElement(p,i({ref:t},m))}));function g(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=a.length,i=new Array(l);i[0]=s;var o={};for(var c in t)hasOwnProperty.call(t,c)&&(o[c]=t[c]);o.originalType=e,o.mdxType="string"==typeof e?e:r,i[1]=o;for(var u=2;u<l;u++)i[u]=a[u];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}s.displayName="MDXCreateElement"},65721:function(e,t,a){a.r(t),a.d(t,{frontMatter:function(){return o},contentTitle:function(){return c},metadata:function(){return u},assets:function(){return m},toc:function(){return d},default:function(){return g}});var n=a(87462),r=a(63366),l=(a(67294),a(3905)),i=["components"],o={slug:"gcp-templates-for-c4-diagrams-using-plantuml",title:"GCP Templates for C4 Diagrams using PlantUML",authors:["jeffreyaven"],draft:!1,hide_table_of_contents:!0,image:"images/gcp-c4.png",tags:["c4model","diagramming","gcp","google-cloud-platform","googlecloudplatform","plantuml","software-architecture"],keywords:["c4model","diagramming","gcp","google-cloud-platform","googlecloudplatform","plantuml","software-architecture"]},c=void 0,u={permalink:"/cloudywithachanceofbigdata.github.io/gcp-templates-for-c4-diagrams-using-plantuml",editUrl:"https://github.com/cloudywithachanceofbigdata/cloudywithachanceofbigdata.github.io/tree/main/src/blog/blog/2020-08-14-gcp-templates-for-c4-diagrams-using-plantuml/index.md",source:"@site/blog/2020-08-14-gcp-templates-for-c4-diagrams-using-plantuml/index.md",title:"GCP Templates for C4 Diagrams using PlantUML",description:"I am a believer in the mantra of **\u201cEverything-as-Code\u201d**, this includes diagrams and other architectural artefacts. Enter PlantUML\u2026",date:"2020-08-14T00:00:00.000Z",formattedDate:"August 14, 2020",tags:[{label:"c4model",permalink:"/cloudywithachanceofbigdata.github.io/tags/c-4-model"},{label:"diagramming",permalink:"/cloudywithachanceofbigdata.github.io/tags/diagramming"},{label:"gcp",permalink:"/cloudywithachanceofbigdata.github.io/tags/gcp"},{label:"google-cloud-platform",permalink:"/cloudywithachanceofbigdata.github.io/tags/google-cloud-platform"},{label:"googlecloudplatform",permalink:"/cloudywithachanceofbigdata.github.io/tags/googlecloudplatform"},{label:"plantuml",permalink:"/cloudywithachanceofbigdata.github.io/tags/plantuml"},{label:"software-architecture",permalink:"/cloudywithachanceofbigdata.github.io/tags/software-architecture"}],readingTime:1.85,truncated:!1,authors:[{name:"Jeffrey Aven",title:"Technologist and Cloud Consultant",url:"https://www.linkedin.com/in/jeffreyaven/",imageURL:"https://s.gravatar.com/avatar/f96573d092470c74be233e1dded5376f?s=80",key:"jeffreyaven"}],prevItem:{title:"Cloud Bigtable Primer Part II \u2013 Row Key Selection and Schema Design",permalink:"/cloudywithachanceofbigdata.github.io/cloud-bigtable-primer-part-ii-row-key-selection-and-schema-design"},nextItem:{title:"Cloud Bigtable Primer - Part I",permalink:"/cloudywithachanceofbigdata.github.io/cloud-bigtable-primer-part-i"}},m={authorsImageUrls:[void 0]},d=[{value:"PlantUML",id:"plantuml",children:[]},{value:"C4 Diagrams",id:"c4-diagrams",children:[]},{value:"GCP Architecture Diagramming using C4",id:"gcp-architecture-diagramming-using-c4",children:[]}],s={toc:d};function g(e){var t=e.components,o=(0,r.Z)(e,i);return(0,l.kt)("wrapper",(0,n.Z)({},s,o,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("p",null,"I am a believer in the mantra of ",(0,l.kt)("em",{parentName:"p"},(0,l.kt)("strong",{parentName:"em"},"\u201cEverything-as-Code\u201d")),", this includes diagrams and other architectural artefacts. Enter PlantUML\u2026"),(0,l.kt)("h2",{id:"plantuml"},"PlantUML"),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://plantuml.com/"},"PlantUML")," is an open-source tool which allows users to create UML diagrams from an intuitive DSL (Domain Specific Language). PlantUML is built on top of Graphviz and enables software architects and designers to use code to create Sequence Diagrams, Use Case Diagrams, Class Diagrams, State and Activity Diagrams and much more."),(0,l.kt)("h2",{id:"c4-diagrams"},"C4 Diagrams"),(0,l.kt)("p",null,"PlantUML can be extended to support the ",(0,l.kt)("a",{parentName:"p",href:"https://c4model.com/"},"C4 model")," for visualising software architecture. Which describes software in different layers including Context, Container, Component and Code diagrams."),(0,l.kt)("h2",{id:"gcp-architecture-diagramming-using-c4"},"GCP Architecture Diagramming using C4"),(0,l.kt)("p",null,"PlantUML and C4 can be used to produce cloud architectures, there are official libraries available through PlantUML for Azure and AWS service icons, however these do not exist for GCP yet. There are several open source libraries available, however I have made an attempt to simplify the implementation."),(0,l.kt)("p",null,"The code below can be used to generate a C4 diagram describing a GCP architecture including official GCP service icons:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},'@startuml\n!define GCPPuml https://raw.githubusercontent.com/gamma-data/GCP-C4-PlantUML/master/templates\n\n!includeurl GCPPuml/C4\\_Context.puml\n!includeurl GCPPuml/C4\\_Component.puml\n!includeurl GCPPuml/C4\\_Container.puml\n!includeurl GCPPuml/GCPC4Integration.puml\n!includeurl GCPPuml/GCPCommon.puml\n\n!includeurl GCPPuml/Networking/CloudDNS.puml\n!includeurl GCPPuml/Networking/CloudLoadBalancing.puml\n!includeurl GCPPuml/Compute/ComputeEngine.puml\n!includeurl GCPPuml/Storage/CloudStorage.puml\n!includeurl GCPPuml/Databases/CloudSQL.puml\n\ntitle Sample C4 Diagram with GCP Icons\n\nPerson(publisher, "Publisher")\nSystem\\_Ext(device, "User")\n\nBoundary(gcp,"gcp-project") {\n  CloudDNS(dns, "Managed Zone", "Cloud DNS")\n  CloudLoadBalancing(lb, "L7 Load Balancer", "Cloud Load Balancing")\n  CloudStorage(bucket, "Static Content Bucket", "Cloud Storage")\n  Boundary(region, "gcp-region") {\n    Boundary(zonea, "zone a") {\n      ComputeEngine(gcea, "Content Server", "Compute Engine")\n      CloudSQL(csqla, "Dynamic Content", "Cloud SQL")\n    }\n    Boundary(zoneb, "zone b") {\n      ComputeEngine(gceb, "Content Server", "Compute Engine")\n      CloudSQL(csqlb, "Dynamic Content\\\\n(Read Replica)", "Cloud SQL")\n    }\n  }\n}\n\nRel(device, dns, "resolves name")\nRel(device, lb, "makes request")\nRel(lb, gcea, "routes request")\nRel(lb, gceb, "routes request")\nRel(gcea, bucket, "get static content")\nRel(gceb, bucket, "get static content")\nRel(gcea, csqla, "get dynamic content")\nRel(gceb, csqla, "get dynamic content")\nRel(csqla, csqlb, "replication")\nRel(publisher,bucket,"publish static content")\n\n@enduml\n')),(0,l.kt)("p",null,"The preceding code generates the diagram below:"),(0,l.kt)("p",null,(0,l.kt)("a",{target:"_blank",href:a(24025).Z},(0,l.kt)("img",{src:a(97202).Z}))),(0,l.kt)("p",null,"Additional services can be added and used in your diagrams by adding them to your includes, such as:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"!includeurl GCPPuml/DataAnalytics/BigQuery.puml\n!includeurl GCPPuml/DataAnalytics/CloudDataflow.puml\n!includeurl GCPPuml/AIandMachineLearning/AIHub.puml\n!includeurl GCPPuml/AIandMachineLearning/CloudAutoML.puml\n!includeurl GCPPuml/DeveloperTools/CloudBuild.puml\n!includeurl GCPPuml/HybridandMultiCloud/Stackdriver.puml\n!includeurl GCPPuml/InternetofThings/CloudIoTCore.puml\n!includeurl GCPPuml/Migration/TransferAppliance.puml\n!includeurl GCPPuml/Security/CloudIAM.puml\n' and more\u2026\n")),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"The complete template library is available at:"),(0,l.kt)("p",{parentName:"blockquote"},(0,l.kt)("a",{parentName:"p",href:"https://github.com/gamma-data/GCP-C4-PlantUML"},"https://github.com/gamma-data/GCP-C4-PlantUML"))))}g.isMDXComponent=!0},24025:function(e,t,a){t.Z=a.p+"assets/files/Sample-C4-Diagram-with-GCP-Icons-291a0d7d898c0130b13e980e6752ec79.png"},97202:function(e,t,a){t.Z=a.p+"assets/images/Sample-C4-Diagram-with-GCP-Icons-291a0d7d898c0130b13e980e6752ec79.png"}}]);